---
name: feature-techspec
description: 'Generate Technical Specification from PRD'
type: generator
category: documentation
complexity: advanced
scope: project

# Activation Configuration
activation:
  manual-commands: ['/feature:techspec']
  flags: ['--techspec', '--ts', '--spec']
  auto-detect: ['prd.md']

# Integration Configuration
framework-integration:
  agents:
    - technical-architect
    - domain-architect
    - quality-delivery
  output-location: 'docs/features/'
  template: 'templates/techspec-template.md'

# Performance Profile
performance-profile: intensive
performance-targets:
  generation-time: '<4min'
  quality-score: '>0.85'
---

# /feature:techspec - Technical Specification Generator

**Transform PRD into detailed technical specification** - Generates comprehensive technical implementation guide.

## Purpose

Converts approved Product Requirements Documents into detailed Technical Specifications, providing implementation blueprints that follow Clean Architecture, DDD principles, and project standards.

## Prerequisites

1. Run `/feature:discovery` to generate discovery documents
2. Run `/feature:prd` to generate PRD
3. Review and approve the PRD before generating techspec

## Usage

```bash
/feature:techspec --from-prd [feature-slug]
/feature:techspec --file prd.md
/feature:techspec --review
```

## Parameters

### Required (one of)
- **--from-prd [feature-slug]**: Use PRD from specified feature
- **--file [path]**: Path to PRD document

### Optional
- **--review**: Review and refine existing techspec
- **--architecture [clean|hexagonal|layered]**: Architecture style (default: clean)
- **--depth [basic|standard|detailed]**: Specification depth (default: standard)

## Workflow

### 1. Initialization
```yaml
action: Load PRD and prepare techspec generation
steps:
  - Load 02-requirements/prd.md from feature folder
  - Verify PRD completeness
  - Initialize technical analysis
  - Load project architecture patterns
  - Update README.md status
```

### 2. PRD Analysis
```yaml
action: Extract technical requirements from PRD
outputs:
  - Functional requirements list
  - Non-functional requirements
  - Integration points identified
  - Performance targets extracted
```

### 3. Architecture Design
```yaml
agent: technical-architect
action: Design system architecture
outputs:
  - Domain placement decisions
  - Component architecture
  - Service interfaces
  - Data models
  - API specifications
```

### 4. Domain Modeling
```yaml
agent: domain-architect
action: Detailed domain design
outputs:
  - Entity definitions
  - Value objects
  - Aggregates
  - Domain events
  - Repository interfaces
```

### 5. Implementation Planning
```yaml
agent: technical-architect
action: Create implementation blueprint
outputs:
  - Build sequence
  - Technical dependencies
  - Integration approach
  - Testing strategy
```

### 6. Quality & Monitoring
```yaml
agent: quality-delivery
action: Define quality and observability approach
outputs:
  - Testing approach
  - Monitoring strategy
  - Performance benchmarks
  - Security considerations
```

### 7. Synthesis & Generation
```yaml
action: Compile technical specification
outputs:
  - 03-technical/techspec.md: Complete specification with frontmatter
  - 03-technical/architecture.md: Architecture decisions log
  - 03-technical/diagrams/: Technical diagrams (if any)
  - Update README.md with techspec completion
  - Next steps for implementation
```

## Output Structure

```
docs/features/[feature-slug]/
├── README.md                 # Feature status and index
├── 01-discovery/            # From /feature:discovery
├── 02-requirements/         # From /feature:prd
│   ├── prd.md
│   └── decisions.md
└── 03-technical/            # Generated by this command
    ├── techspec.md         # Technical specification
    ├── architecture.md     # Architecture decisions
    └── diagrams/           # Technical diagrams
```

## Technical Specification Structure

### techspec.md
Following the template in `templates/techspec-template.md`:

1. **Executive Summary**: Technical overview
2. **System Architecture**: Domain placement and components
3. **Implementation Design**: Interfaces, models, APIs
4. **Integration Points**: External dependencies
5. **Impact Analysis**: System-wide effects
6. **Testing Approach**: Unit and integration strategies
7. **Development Sequencing**: Build order
8. **Monitoring & Observability**: Metrics and logging
9. **Technical Considerations**: Decisions and risks

## Domain Placement Rules

The techspec will specify placement in appropriate `engine/` subdirectories:
- `agent/` - Agent configurations
- `task/` - Task execution
- `tool/` - Tool definitions
- `workflow/` - Workflow orchestration
- `runtime/` - Bun runtime execution
- `infra/` - Infrastructure components
- `llm/` - LLM integration
- `mcp/` - Model Context Protocol
- `project/` - Project configuration
- `schema/` - Schema validation
- `autoload/` - Resource discovery
- `core/` - Core types and utilities

For internal packages, use `pkg/` directory structure.

## Quality Gates

### Technical Completeness
- ✅ All PRD requirements addressed
- ✅ Architecture clearly defined
- ✅ Interfaces specified
- ✅ Data models complete
- ✅ Testing approach defined

### Standards Compliance
- Follows architecture.mdc principles
- Applies code-standards.mdc
- Uses required libraries
- Implements proper error handling
- Follows test standards

## Error Handling

### Missing Requirements
- Flag gaps in PRD
- Request clarification
- Provide assumptions for review

### Technical Conflicts
- Identify constraint violations
- Suggest alternatives
- Document trade-offs

## Examples

### From PRD (Recommended Flow)
```bash
# Step 1-2: Discovery and PRD generation
/feature:discovery "Feature idea"
/feature:prd --from-discovery feature-slug

# Step 3: Generate techspec
/feature:techspec --from-prd feature-slug
```

### From Existing PRD File
```bash
/feature:techspec --file docs/prd/feature/prd.md
```

### Review and Refine
```bash
/feature:techspec --review --from-prd feature-slug
```

### Detailed Specification
```bash
/feature:techspec --from-prd feature-slug --depth detailed --architecture hexagonal
```

## Best Practices

1. **Review PRD First**: Ensure PRD is complete and approved
2. **Check Architecture Patterns**: Align with existing project patterns
3. **Consider Impact**: Review impact analysis carefully
4. **Plan Testing Early**: Define test strategy upfront
5. **Document Decisions**: Capture why, not just what

## Integration with Next Steps

After techspec approval:
1. Review the generated `techspec.md`
2. Run `/feature:tasks --from-techspec [feature-slug]` to generate task breakdown
3. Task generation will use techspec for implementation details

## Related Documentation

- Previous steps: `/feature:discovery`, `/feature:prd`
- Next step: `/feature:tasks` - Generate task breakdown
- Template: `templates/techspec-template.md`
- Standards: `.cursor/rules/architecture-design-principles.mdc`