---
name: feature-prd
description: 'Generate Product Requirements Document from discovery or brief'
type: generator
category: documentation
complexity: advanced
scope: project

# Activation Configuration
activation:
  manual-commands: ['/feature:prd']
  flags: ['--prd']
  auto-detect: ['brief.md', 'research.md']

# Integration Configuration
framework-integration:
  agents:
    - orchestrator
    - domain-architect
    - ux-architect
    - business-strategist
    - technical-architect
    - quality-delivery
  output-location: 'docs/features/'
  template: 'templates/prd-template.md'

# Performance Profile
performance-profile: intensive
performance-targets:
  generation-time: '<5min'
  quality-score: '>0.85'
---

# /feature:prd - Product Requirements Document Generator

**Generate comprehensive PRD from discovery outputs** - Orchestrates specialized agents to create actionable product documentation.

## Purpose

Transforms discovery outputs and briefs into complete Product Requirements Documents by orchestrating multiple specialized agents, each contributing domain expertise to create a comprehensive PRD following Clean Architecture and DDD principles.

## Prerequisites

Run `/feature:discovery` first to generate the discovery and brief documents, unless you have an existing brief.

## Usage

```bash
/feature:prd --from-discovery [feature-slug]
/feature:prd --from-discovery [slug]  # Alternative
/feature:prd --file brief.md          # From brief file
/feature:prd --review                 # Review existing PRD
```

## Parameters

### Required (one of)
- **--from-discovery [feature-slug]**: Use discovery outputs from specified feature
- **--file [path]**: Path to brief or discovery document

### Optional
- **--review**: Review and refine existing PRD
- **--phases [mvp|full]**: Generate phased approach (default: mvp)
- **--depth [basic|standard|comprehensive]**: Analysis depth (default: standard)

## Workflow

### 1. Initialization
```yaml
action: Load discovery outputs and prepare PRD generation
steps:
  - Load 01-discovery/brief.md and research.md
  - Verify prerequisites are met
  - Initialize agent orchestration
  - Set generation parameters
  - Update README.md status
```

### 2. Context Loading
```yaml
action: Process discovery outputs for agent consumption
inputs:
  - 01-discovery/research.md: Complete discovery document
  - 01-discovery/qa-transcript.md: Q&A context
  - 01-discovery/brief.md: Executive summary
outputs:
  - Structured context for each agent
  - Identified gaps to address
```

### 3. Domain Analysis
```yaml
agent: domain-architect
action: Analyze domain requirements and bounded contexts
outputs:
  - Domain model identification
  - Bounded contexts definition
  - Ubiquitous language extraction
```

### 4. User Experience Design
```yaml
agent: ux-architect
action: Define user journeys and experience requirements
outputs:
  - User personas
  - User stories
  - Journey maps
  - Accessibility requirements
```

### 5. Business Strategy
```yaml
agent: business-strategist
action: Define business value and success metrics
outputs:
  - Business goals
  - Success metrics
  - Market analysis
  - ROI projections
```

### 6. Technical Architecture
```yaml
agent: technical-architect
action: Define technical constraints and feasibility
outputs:
  - High-level technical constraints
  - Integration requirements
  - Performance targets
  - Security considerations
```

### 7. Quality & Delivery
```yaml
agent: quality-delivery
action: Define quality criteria and delivery plan
outputs:
  - Quality metrics
  - Testing strategy
  - Phased rollout plan
  - Risk assessment
```

### 8. Synthesis & Generation
```yaml
agent: orchestrator
action: Synthesize all inputs into final PRD
outputs:
  - 02-requirements/prd.md: Complete PRD with YAML frontmatter
  - 02-requirements/decisions.md: Product decisions log
  - Update README.md with PRD completion status
  - Next steps recommendations
```

## Output Structure

```
docs/features/[feature-slug]/
├── README.md                 # Feature status and index
├── 01-discovery/            # From /feature:discovery
│   ├── brief.md
│   ├── research.md
│   └── qa-transcript.md
└── 02-requirements/         # Generated by this command
    ├── prd.md              # Final PRD with frontmatter
    └── decisions.md        # Product decisions log
```

## Agent Orchestration

### Orchestrator Agent
- **Role**: Master coordinator
- **Responsibilities**: 
  - Initial analysis
  - Agent sequencing
  - Conflict resolution
  - Final synthesis

### Domain Architect
- **Role**: Domain modeling expert
- **Contributions**:
  - Core domain identification
  - Bounded contexts
  - Domain events
  - Aggregate design hints

### UX Architect
- **Role**: User experience specialist
- **Contributions**:
  - User personas
  - Journey mapping
  - Interaction design requirements
  - Accessibility standards

### Business Strategist
- **Role**: Business value expert
- **Contributions**:
  - Business goals alignment
  - Success metrics
  - Market positioning
  - Value proposition

### Technical Architect
- **Role**: Technical feasibility expert
- **Contributions**:
  - Technical constraints
  - System boundaries
  - Integration points
  - Non-functional requirements

### Quality Delivery
- **Role**: Quality and delivery expert
- **Contributions**:
  - Quality attributes
  - Testing strategies
  - Delivery phases
  - Risk mitigation

## Integration Points

### With Other Commands
- **/feature:techspec**: Generate technical specification from PRD
- **/feature:tasks**: Create task breakdown from PRD
- **/feature:estimate**: Generate estimates from PRD

### With Frameworks
- Follows Clean Architecture principles
- Respects DDD boundaries
- Aligns with SOLID principles
- Maintains framework compliance

## Quality Gates

### PRD Completeness Check
- ✅ All template sections filled
- ✅ User stories defined
- ✅ Success metrics specified
- ✅ Risks identified
- ✅ Phased approach defined

### Agent Consensus
- Domain model validated
- UX requirements confirmed
- Business value articulated
- Technical feasibility verified
- Quality criteria established

## Error Handling

### Input Validation
- Verify idea/brief has sufficient detail
- Check file exists if --file specified
- Validate feature-slug format

### Agent Failures
- Retry with fallback prompts
- Provide partial PRD if agent fails
- Log issues for manual review

### Output Validation
- Ensure all required sections present
- Validate against PRD template
- Check for internal consistency

## Examples

### From Discovery (Recommended Flow)
```bash
# Step 1: Run discovery
/feature:discovery "Task management system with Git integration"

# Step 2: Generate PRD from discovery
/feature:prd --from-discovery task-git-integration
```

### From Existing Brief
```bash
/feature:prd --file docs/briefs/feature-brief.md
```

### Review and Refine
```bash
/feature:prd --review --from-discovery task-git-integration
```

### Comprehensive PRD
```bash
/feature:prd --from-discovery enterprise-etl --depth comprehensive --phases full
```

## Best Practices

1. **Always Run Discovery First**: Better context leads to better PRDs
2. **Review Before Generation**: Check discovery outputs before PRD generation
3. **Use Review Mode**: Refine PRD with `--review` for critical features
4. **Maintain Continuity**: Keep feature-slug consistent across commands

## Integration with Next Steps

After PRD approval:
1. Review the generated `prd.md`
2. Run `/feature:techspec --from-prd [feature-slug]` to generate technical specification
3. Technical specification will use PRD as foundation

## Related Documentation

- Previous step: `/feature:discovery` - Discovery and brief generation
- Next step: `/feature:techspec` - Generate technical specification
- Templates: `templates/prd-template.md`
- Agents: `.claude/agents/`